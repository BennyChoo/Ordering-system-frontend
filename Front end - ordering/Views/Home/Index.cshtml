@using Front_end___ordering.ViewComponents

@{
    Layout = "~/views/shared/_Layout.cshtml";
}

<style>
    html {
        overflow: scroll;
        overflow-x: hidden;
        scroll-behavior: auto !important;
        -webkit-overflow-scrolling: touch;
    }

    body {
        overflow: scroll;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
        overflow: hidden;
    }

    .container {
        overflow: scroll;
        overflow-x: hidden;
        overflow-x: auto;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        /* scroll-behavior: auto; */
        /*         overflow-x: scroll;
        overflow-y: scroll; */
        /* overflow: -moz-hidden-unscrollable; */
    }



    /* Hide scrollbar for Chrome, Safari and Opera */

    .container::-webkit-scrollbar {
        display: none;
        width: 0; /* Remove scrollbar space */
        background: transparent; /* Optional: just make scrollbar invisible */
    }

/*     body::-webkit-scrollbar {
        display: none;
    } */

    /* #navBar::-webkit-scrollbar {
        display: none;
    } */

    ::-webkit-scrollbar {
        display: none;
        width: 0; /* Remove scrollbar space */
        background: transparent; /* Optional: just make scrollbar invisible */
    }

    body::-webkit-scrollbar-thumb {
        display: none; /* Safari specific hide */
    }

    .container::-webkit-scrollbar-thumb {
        display: none; /* Safari specific hide */
    }


    /* Hide scrollbar for IE, Edge and Firefox */
    #navBar {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
        scrollbar-color: transparent transparent;
    }

    body {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
        scrollbar-color: transparent transparent;
    }

    .container {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
        scrollbar-color: transparent transparent;
    }

    #navBar {
        /* padding: 10px 8px; */
        overflow-x: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 2px;
    }

    #fixTop{
        position: fixed;
        /* width: 100%; */
        z-index: 9;
        left: 50%;
        top: 0%;
        transform: translateX(-50%);
        width: 100%;
        background: white;
        padding: 0.5rem 0.6rem;
    }

    ul {
        list-style-type: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        width: 100%;
        /* width: 363px; */
        height: 57px;
        /* overflow-x: auto; */
        flex-shrink: 0;
        align-items: center;
        white-space: nowrap;
        /* overflow-y: hidden; */
        /* display: flex;
            justify-content:space-between ; */
    }

    li {
        /* display: inline-block;
            height: 30px; */
        font-size: 1.3rem;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: flex-start;
        padding: var(--padding-7xs) var(--padding-base);
    }

    li a {
        /* display: block; */
        /* text-align: center; */
        padding: 10px 0px;
        text-decoration: none;
        color: rgb(108,117,125);
        width: max-content;
        position: relative;
        line-height: 28px;
    }

    .active {
        color: rgb(40,187,173);
        border-bottom: 3px solid rgb(40,187,173);
    }

    a:hover {
        color: rgb(108,117,125);
    }

    .productName {
        font-weight: bold;
        font-size: 1.4rem;
    }

    .productDescription {
        color: rgb(108,117,125);
        line-height: 18px;
    }

    .productPrice {
        font-size: 1.4rem;
        font-weight: bold;
        color: rgb(40,187,173);
    }



    .line {
        border-bottom: 1px solid rgb(200,200,200);
        width: 110%;
        left: -10px;
        position: relative;
        margin-bottom: 1rem;
    }

    #productContents {
        padding: 0 10px;
        padding-top: 27rem;
        /* position: relative;
        top: 27rem; */
    }

    .navSection {
        /* margin-top: 27rem; */
    }

    @@media screen and (max-width: 431px) and (max-height: 933px) {
        #productContents {
            padding-top: 28rem;
        }
    }

    @@media screen and (max-width: 391px) and (max-height: 845px) {
        #productContents {
            padding-top: 26.5rem;
        }
    }

    @@media screen and (max-width: 376px) and (max-height: 668px){
        #productContents {
            padding-top: 26rem;
        }
    }

    .productContentsLine {
        border-bottom: 1px solid rgb(200,200,200);
        position: relative;
        top: -20px;
    }

</style>
<div>
    <div id="fixTop">
        <div class="d-flex justify-content-between mb-2">
            <img src="/img/logo.svg" alt="logo" style="font-size: 2rem; padding-top: 0.5rem;" />
            <div style="font-size: 2rem;"><i class="bi bi-cart2" id="cartIcon"></i></div>
        </div>

        <div id="foodBanner" style="" class="mb-3">
            <div class="row bg-black h-100">
                <div class="col-12" style="padding: 0;">
                    <img src="img/promo-poster@3x.png" alt="pizzaImg" class="w-100 h-100" />
                </div>
            </div>
        </div>


        <div id="navBar" class="mb-3">
            <ul class="navItems-parent">
                @* <li><a onclick="loadSection('Category', 'MostPopular', 'popular', this)" class="active" href="javascript:void(0);">Most popular</a></li> *@
                <li><a onclick="scrollToSection('popular', this)" class="active" href="#popular">Most popular</a></li>
                <li><a onclick="scrollToSection('appetizers', this)" href="#appetizers">Appetizers</a></li>
                <li><a onclick="scrollToSection('mainDishes', this)" href="#mainDishes">Main dishes</a></li>
                <li><a onclick="scrollToSection('pasta', this)" href="#pasta">Pasta</a></li>
                <li><a onclick="scrollToSection('sandwiches', this)" href="#sandwiches">Sandwiches</a></li>
            </ul>
        </div>
        <div class="line"></div>

    </div>

    <div id="productContents">

        <div id="popular" class="navSection">
            @await Component.InvokeAsync("Category", new {categoryType = "MostPopular"})
            @* <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mozarella sticks</div>
                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>
                    <div class="productPrice">RM 9.90</div>
                </div>

            </div>

            <div class="productContentsLine"></div>


            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mozarella sticks</div>
                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>
                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mozarella sticks</div>
                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>
                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div> *@
        </div>


        <div id="appetizers" class="navSection">
            @await Component.InvokeAsync("Category", new { categoryType = "Appetizers" })
            @* <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mushroom soup</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mushroom soup</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Mushroom soup</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div> *@
        </div>



        <div id="mainDishes" class="navSection">
            @await Component.InvokeAsync("Category", new { categoryType = "MainDishes" })
            @* <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Fish n Chips</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Fish n Chips</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Fish n Chips</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div> *@
        </div>

        <div id="pasta" class="navSection">
            @await Component.InvokeAsync("Category", new { categoryType = "Pasta" })
           @*  <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Spaghetti Aglio Olio</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Spaghetti Aglio Olio</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Spaghetti Aglio Olio</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div> *@
        </div>

        <div id="sandwiches" class="navSection">
            @await Component.InvokeAsync("Category", new { categoryType = "Sandwiches" })
            @* <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Sandwiches Egg Mayo</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Sandwiches Egg Mayo</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div>
            <div class="productContentsLine"></div>

            <div class="row mb-5 product">
                <div class="col-4">
                    <img src="/img/frame-2351@2x.png" alt="mozarella" class="w-100 h-100" />

                </div>
                <div class="col-8" id="productWordings">
                    <div class="productName pb-2">Sandwiches Egg Mayo</div>

                    <div class="productDescription pb-3">Golden and irresistibly crispy on the outside, our Mozarella Sticks are a delightful burst of cheesy goodness.</div>

                    <div class="productPrice">RM 9.90</div>
                </div>
            </div> *@
        </div>
    </div>

</div>


<script>
    var sections = document.querySelectorAll(".navSection");
    var navLinks = document.querySelectorAll("#navBar a");
    var clickScroll = false;

    $(document).ready(function () {
        document.getElementById("cartIcon").addEventListener("click", function () {
            window.location.href = "cart";
        });

        // var anchors = document.querySelectorAll("li a")

        // anchors.forEach(anchorTag => {
        //     anchorTag.addEventListener("click", transferActiveClass)
        // })

        // navLinks.forEach(link => {
        //     link.addEventListener("click", (event) => {
        //         // event.preventDefault();
        //         var sectionId = link.getAttribute("href").slice(1);

        //         var section = document.getElementById(sectionId);
        //         var bannerHeight = document.getElementById('fixTop').offsetHeight;

        //         if (section) {
        //             var offsetTop = section.offsetTop - bannerHeight;

        //             clickScroll = true;

        //             window.scrollTo({
        //                 top: offsetTop,
        //                 behavior: 'auto'
        //             });


        //         }

        //         navLinks.forEach(navLink => {
                   
        //             navLink.classList.remove("active");
        //         });

                
        //         link.classList.add("active");

        //         event.preventDefault();


        //     });
        // })

        var allProducts = document.querySelectorAll(".product")

        allProducts.forEach(product => {
            product.addEventListener("click", () => {
                location.href = "/Home/MenuDetail/"
            })
        }) 

        window.addEventListener("scroll", updateActiveState);
    })

    function updateActiveState() {
        if (clickScroll){
            clickScroll = false;
            return;
        }

        var current = "";

        sections.forEach(function (section) {
            var sectionTop = section.offsetTop;
            var sectionHeight = section.clientHeight;
            var bannerHeight = document.getElementById('fixTop').offsetHeight;

            // console.log(sectionTop)
            // console.log(sectionHeight)

            // if (pageYOffset >= sectionTop - sectionHeight / 3) {
            //     current = section.id;
            // }

            //to trigger the transfer of active class when contents scroll under banner
            if (pageYOffset >= sectionTop - bannerHeight) {
                current = section.id;
            }
        });

        if (current){
            navLinks.forEach(function (link) {
                link.classList.remove("active");
                if (link.getAttribute("href").slice(1) === current) {
                    link.classList.add("active");
                }
            });
        }
        

    }

    function transferActiveClass() {
        var activeElement = document.querySelector(".active")

        if (activeElement){
            activeElement.classList.remove("active");

        }

        // console.log(this)
        this.classList.add("active");
    }

    function directToCheckout() {
        //direct to checkout page
        window.location.href = "/cart/";
    }

    function scrollToSection(sectionId, anchorTag) {
        var section = document.getElementById(sectionId);
        var bannerHeight = document.getElementById('fixTop').offsetHeight;

        if (section) {
            var offsetTop = section.offsetTop - bannerHeight;

            // console.log(section.offsetTop)
            // console.log(section.clientHeight)
            // console.log(pageYOffset)

            clickScroll = true;

            window.scrollTo({
                top: offsetTop,
                behavior: 'auto'
            });
        }

        navLinks.forEach(link => {
            link.classList.remove("active");
        });

        // console.log(anchorTag);
        anchorTag.classList.add("active");

        event.preventDefault();
    }

    function loadSection(controller, action, targetId, anchorTag) {
        var section = document.getElementById(targetId);
        var bannerHeight = document.getElementById('fixTop').offsetHeight;

        var url = '@Url.Action("Action1", "Controller")';
        url = url.replace('Action1', action).replace('Controller', controller);
        url += "#" + targetId;


        $.get(url, function (data) {
            $('#' + targetId).html(data);

            var offsetTop = section.offsetTop - bannerHeight;

            clickScroll = true;

            window.scrollTo({
                top: offsetTop,
                behavior: 'auto'
            });


            // $('html, body').animate({
            //     scrollTop: $('#' + targetId).offset().top
            // }, 'auto');
        });
    }
</script>